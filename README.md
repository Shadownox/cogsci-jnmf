CogSci JNMF
===========

Companion repository for the 2020 article "Analyzing the Differences in Human Reasoning via Joint Nonnegative Matrix Factorization" published in the proceedings of the 42nd Annual Meeting of the Cognitive Science Society.

### Overview

- `analysis/`: Contains scripts for the analysis of the matrices.
    - `.../cognitive_model_comparison`: Contains the script and models for a comparison of the patterns to cognitive theories.
		- `.../models/`: Contains the prediction tables of the cognitive theories extracted from Khemlani & Johnson-Laird (2012).
		- `.../model_radar.py`: Generates the radar plot comparing the patterns to cognitive theories (Figure 3).
	- `.../contrasts`: Contains a script plotting the patterns (Figure 1).
	- `.../model_evaluation/`: Contains scripts for evaluating the quality of the patterns obtained from the latent matrices.
		- `.../h_importances.py`: Calculates the importance of the patterns based on the H-matrices as well as the common and distinct errors (in Table 1).
		- `.../model_performance.py`: Plots the predictive accuracy of the latent matrices on the respective datasets9 (Figure 4).
		- `.../plot_h_distribution.py`: Plots the distribution of values in the H-matrices (Figure 3).
		- `.../reconstruction_error.py`: Calculates the reconstruction errors (in Table 1).
- `data/`: Contains the data used to run the JNMF and the script to extract it from the [Dames2020](https://osf.io/x3wvf) dataset.
	- `.../extract.py`: Extracts the neccessary information from the [Dames2020](https://osf.io/x3wvf) dataset.
	- `.../extracted.csv`: Dataset needed to run the JNMF. Can be generated by running `extract.py`.
- `jnmf/`: Contains the scripts for performing the JNMF.
	- `.../jnmf/:` Contains the JNMF implementation.
	- `.../run_jnmf.py`: Script performing the JNMF on `data/extracted.csv` for a given personality trait, alpha and beta.
- `matrices/`: Contains the resulting matrices from the JNMF performed for the article.

### Dependencies

- Python 3
    - CCOBRA
    - pandas
    - numpy
    - seaborn

### Quickstart

#### Prepare the data

After downloading the [Dames2020](https://osf.io/x3wvf) dataset, run:

```
cd /path/to/repository/data
$> python extract.py [path/to/data.csv]
```

This will create the data needed for running the JNMF (`extracted.csv`).

#### Run the JNMF

The JNMF will always use `data/extracted.csv`, so make sure the file exists. To perform the JNMF, run:

```
cd /path/to/repository/jnmf
$> python run_jnmf.py [property] [alpha] [beta]
```

- property: Name of the column for performing the split (`conscientiousness`, `openness`).
- alpha: The alpha parameter, e.g., 300 for `conscientiousness`.
- beta: The beta parameter, e.g., 250 for `conscientiousness`.

This will create files containing the resulting matrices:
- `fit_result_property_H_high`: H-matrix for the group with high values of the property
- `fit_result_property_H_low`: H-matrix for the group with low values of the property
- `fit_result_property_W_high`: W-matrix for the group with high values of the property
- `fit_result_property_W_low`: W-matrix for the group with low values of the property

#### Run the analyses

All analysis scripts will use the matrices in the `matrices/` folder of the repository. 
To run the scripts, navigate to the respective directory, e.g., by running the command:

```
cd /path/to/repository/analysis/cognitive_model_comparison
```

All scripts take no arguments, so they can be executed directly:

```
cd python [script].py
```

The results will be saved in the directory containing the script.

### Reference

Brand, D., Riesterer, N., Dames, H., & Ragni, M. (in press). Analyzing the Differences in Human Reasoning via Joint Nonnegative Matrix Factorization. In Proceedings of the 42nd Annual Conference of the Cognitive Science Society.
